<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="code">

	<!--코드명을 리턴. 사용메뉴 : 공통+해당모듈 -->
	<select id="getCodeGrpList" parameterType="com.crud.ideacrm.dto.CodeDto" resultType="String">
		SELECT DISTINCT CODEGRP
		FROM SYS990020
	    WHERE USINGMENU in (0, #{usingmenu})
	    AND COMMONFLAG = #{commonflag}
	</select>

	<select id="getCodeList" parameterType="com.crud.ideacrm.dto.CodeDto" resultType="com.crud.ideacrm.dto.CodeDto">
		SELECT CODEGRP, CODENAME, CODEVAL
		FROM sys990020
		WHERE
			CODEGRP = #{codegrp}
		<if test='commonflag == 1'>
			AND SITEID = #{siteid}
		</if>
	</select>

	<select id="getCodeNo" parameterType="codeDto" resultType="String">
    	SELECT CODENO FROM SYS990020
    	WHERE SITEID = #{siteid}
    	AND CODEGRP = #{codegrp}
    	AND CODEVAL = #{codeval}

    </select>

	<select id="getUpperCodeGrp" parameterType="codeDto" resultType="codeDto">
    	SELECT * FROM sys990020
    	WHERE SITEID = #{siteid}
    	AND UPPERCODEGRP = #{uppercodegrp}
    </select>

</mapper>